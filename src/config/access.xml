<acl>
  <roles>
    <role name="guest">
      <allow resource="published etd">view metadata</allow>
      <allow resource="published file">view, download</allow>
      <allow resource="embargoed file">view</allow>
    </role>

    <!-- base roles determined by person type in ESD; must be defined for ACL -->
    <role name="staff" inherits="guest"/>
    <role name="faculty" inherits="guest"/>

    <role name="student" inherits="guest">
      <allow resource="etd">create</allow>
    </role>

    <!-- a student who already has a submission should not submit another one -->
    <role name="student with submission" inherits="guest">
      <allow resource="user">create</allow>
    </role>

<!-- pseudo-role with view privileges inherited by author, committee, dept. staff -->
    <role name="view_all" inherits="guest">	
      <allow resource="etd">view metadata, view history, view status</allow>
      <allow resource="embargoed file">view, download</allow>
    </role>

    <role name="author" inherits="view_all">
      <allow resource="file">view, download</allow>		<!-- includes original, embargoed -->
      <allow resource="draft etd">edit metadata, add file, submit</allow>
      <allow resource="draft file">edit, remove</allow>
      <allow resource="user">view, edit</allow>
    </role>
    <role name="committee" inherits="view_all"/>	
    <role name="departmental staff" inherits="view_all"/>

    <role name="admin" inherits="view_all">
       <allow resource="etd">edit history, edit status, manage</allow>
	<!-- workflow actions according to when they can be done -->
       <allow resource="submitted etd">review</allow>
       <allow resource="reviewed etd">approve, request changes</allow>
       <allow resource="approved etd">publish</allow>	<!-- not technically done by admin... -->
       <allow resource="published etd">unpublish</allow>

       <allow resource="file">view, download</allow>		<!-- includes original, embargoed -->

       <allow resource="user">view</allow>
    </role>

    <role name="superuser">
      <allow/>	<!-- allow anything -->
    </role>
  </roles>
  <resources>
   <resource name="etd">
      <!-- etds in various states -->
      <resource name="draft etd"/>
      <resource name="submitted etd"/>
      <resource name="reviewed etd"/>
      <resource name="approved etd"/>
      <resource name="published etd"/>
    </resource>

   <resource name="file">
      <resource name="embargoed file"/>
      <resource name="published file"/>	<!-- better way to specify these? -->
      <resource name="draft file"/>	
      <resource name="original file"/>	
   </resource>

   <resource name="user"/>

  </resources>

<!-- fixme: some way to use these as shortcuts? 
e.g., author can view, view = view metadata + view history + view status, etc. -->
  <actions>
    <action name="view"/>
    <action name="edit"/>
  </actions>
</acl>