<style>
 span.ui-helper-hidden-accessible{display: none;} /*prevent weird jquery output */
 ul.ui-menu li.ui-menu-item a.ui-state-focus {display: block;} // made sure it only effects this page
</style>

<h1><?=$this->title?></h1>
<p>Some text here to explain what to do on the page. Bla Bla Bla Bla Bla Bla Bla Bla Bla Bla Bla <br /> 
    Bla Bla Bla Bla Bla Bla Bla Bla Bla Bla Bla Bla Bla Bla Bla Bla Bla Bla Bla Bla Bla Bla </p>


<form method="post" id="customs_report_form"  action="<?= $this->url(array("action" => "custom"))?>" onsubmit="disableButton('search')">
    
	  
<span class="ui-widget" style="display: inline-block;" >
<div id='field-desc' style="color:white; background-color:black; position: absolute; top: 104px; display: none"></div>    
<div style="margin-top:20px;">
<input id="custom-report" size="80" name="criteria" value="<?=$this->criteria;?>" />
<?= $this->formSubmit("search", "Search >", array("class" => "submitbutton")); ?>
</div>
</span>
    
</form>

<!-- COUNT:<?=count($this->etdSet);?><br><br>
<? foreach($this->etdSet->etds as $etd){print "Author: $etd->author <br>";} ?> -->


<script language="Javascript" type="text/javascript">
    function split( val ) {
    return val.split( /,\s*/ );
}
function extractLast( term ) {
    return split( term ).pop();
}

$j(document).ready(function() { //START of ready function
$j.ui.autocomplete.prototype._renderItem = function (ul, item) {
    return $j("<li></li>")
     .data("item.autocomplete", item)
    .addClass("tip ui-menu-item")
    .append("<a>" + item.label + "</a>")
    .attr("desc", item.description)
    .attr("role", "presentation")
    .appendTo(ul);
};

$j("#custom-report" )
.autocomplete({
source: function( request, response ) {
$j.getJSON( "<?=$this->url(array("controller"=>"report", "action"=>"custom-autocomplete"))?>", {
term: extractLast( request.term )
}, response );
},

search: function() {
//Place holder
},

focus: function (event, ui) {
       // Prevent the default focus behavior.
       event.preventDefault();
       // display descriptions of fields
       var li = $j(event.srcElement).parent()
       li.addClass('selected')
       var target =  $j('#field-desc');
       target.text(ui.item.description);
       target.fadeIn('slow');
       var e = $j('li').hover(function(){this.addClass('ui-state-focus');}, function(){this.removeClass('ui-state-focus');});
},

close: function(event, ui){
    $j('#field-desc').fadeOut('slow');
},

select: function( event, ui ) {
var terms = split( this.value );
terms.pop();
terms.push( ui.item.value );
this.value = terms.join( ", " );
return false;
}
});

}); //END of ready function
</script>
