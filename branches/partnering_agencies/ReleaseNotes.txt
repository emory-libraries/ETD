ETD Release Notes
=================
Version 1.8.1 - September 2010 (enhancements)
* Add partnering agency to an ETD.

Deployment notes:
* Update partnering agencies:
- add this property to config.xml (place below <programs_pid>):
  <vocabularies_pid>emory-control:ETD-vocabulary</vocabularies_pid>
- 017-add-partnering_agencies_RSPH.php.php - before running this script, 
    make sure the pid "emory-control:ETD-vocabulary" exists in fedora.


Version 1.8 - September 2010 (enhancements)
* Collections config has been consolidated in schools.xml
* MySql database config file has been added
* A RSPH author can login to ETD site and successfully create and submit a record
* The program is now pre-populated for RSPH authors at time of submission
* RSPH administrators can view and interact with all RSPH records within his/her department and academic plan that have been submitted, reviewed, and approved
* Users of the ETD site can browse programs and see the RSPH documents by program
* RSPH authors will have their documents published with Grad School, Candler and Honors documents
* An admin or report viewer can download the CSV file reports using firefox and IE
* Xacml policy permissions have been refactored
* Mime-type detection has been refactored for PDF files

Deployment notes:
* Update fedora policies under FEDORA_HOME to branch:
- staging: https://svn.library.emory.edu/svn/fedora/repository-policies/branches/etd_1.8.x
- production: https://svn.library.emory.edu/svn/fedora/repository-policies/tags/?
* Add etdOwner to config
* Remove honors_collection section from config.xml
 * Remove collections section from config.xml
 * Add etd-db.xml as specified in etd-db.xml.example file
 * Run the following migrations / scripts
 * 015a-add-collection_program_owners.php - Change maintenance_account to use fedoraAdmin for this migration then change back to etdmaint
-  create_collections.php
-  015-add-rollins-programs.php
-  016-add-prog_codes_to_skos.php - before running this script, 
    manually edit the config.xml defined programs_pid.
    Select the SKOS datastream for edit, then add this attribute to first line:
    xmlns:dc="http://purl.org/dc/elements/1.1/"
- DB/001-create_db_user_table.sql - See notes at top of script. You have to replace <DB NAME> and <PASSWORD> values.  Run this thru PHPMyAdmin
- DB/002-load_init_data.php

Version 1.7.3 - August 2010 (bugfix)
 * Fixed bug in etdSet code which caused email templates to not function correctly.
* Fixed bug in etd search filtering. 


Version 1.7.2 - August 2010 (bugfix)
 * Fixed bug in embargo_expiration script.

Version 1.7.3 - August 2010 (bugfix)
 * Fixed bug in etdSet code which caused email templates to not function correctly.
* Fixed bug in etd search filtering.

Version 1.7.2 - August 2010 (bugfix)
 * Fixed bug in embargo_expiration script.
 
Version 1.7.1 - August 2010 (bugfix)
 * Fixed bug in pagination code in searchController that caused results with one item to fail.
 * Changed link to ETD Help page on side nav.

Version 1.7 - August 2010 (enhancements)

 * Site news and subject documents are now pulled from an RSS feed from tagged content on
   the Digital Libraries drupal site
 * Open Flash Chart Version 2 Lug Wyrm Charmer
    download at http://sourceforge.net/projects/openflashchart/files/ 
    open-flash-chart-2-Lug-Wyrm-Charmer.zip (5.0 MB   2009-07-27    68,688)
    Note: modified OFC_Charts_Bar_Stack.php to allow for stacked bar chart legend key to display.
 * Output of the publication script now has enough information to determine which non-honors undergrad are skipped.
 * The OAI harvester that harvests ETD records by OAI set now receives a single
   copy of each ETD record in that set.
 * Date and program-segmented charts of embargo requests and document length charts are now avaliable.
 *  Authors now receive ETD system emails addressed to them by their full name
 * An author now receives feedback about errors when entering contact information. This feature no longer users XForms.
 * The datastreams portion of the ETD model have been refactored so that the datastream files are in a sub-directory.
 * Refactored code to change User class to AuthorInfo class.
 * An admin, report viewer etc. will receive the correct role after login
 * A user can view a redesigned implementation of the pagination for the search and browse results to provide a simpler navigation experience.
 * A new option for alternate ports has been added to the fedora config and supporting logic has been added to the xmlById service.

Deployment notes:
 * main config.xml has new  sections for for news_feed and doc_feed
 * persis.xml test section has changed
 * Run following migrations:
   014-remove_duplicate_collection_membership.php
 * Run a “forced refresh” on the fedora OAI provider


Version 1.6.3 - April 2010 (bugfix)

 * Emory authors from the College and Candler School of Theology can
 * download updated Submission Agreement Forms from the ETD website.

Version 1.6.2 - March 2010 (bugfix)
 * Authors with dual roles such as student/staff will be able to create an ETD based
 on their school affiliation.


Version 1.6.1 - March 2010 (bugfix)

* Authors may embargo all or part of the ETD record and still be able
  to pass validations on submission review page.

Version 1.6 - March 2010

* Added support for receiving and managing submissions from Candler
  School of Theology.  Per-school configuration is now handled largely
  through the schools.xml config file; for more details, see
  Documentation/MultiSchoolConfiguration.txt.
* Several enhancements & changes to the submission process:
  * Pre-submission screening questions to identify possible copyright
    and patent issues.
  * Program selection interface changed; only the portion relevant to
    the student's school is available.
  * Additional checks when adding files to a submission:
    - duplicate files will be rejected (based on checksum)
    - PDF is not allowed for original document
* New "Report Viewer" role with access to ETD reports and statistics.
* New admin feature to revise embargo end dates.
* Publication script has been revised to send a high-level summary
  email to site admin, with more detailed information sent to a log.
* All automated email notices will have a reply-to address set based
  on the contact email configuration in the main config file.
* Improved mapping of fields from MODS to Dublin Core, which will
  be available in the OAI provider.

Deployment notes:
  * Changes to main config file (see config.xml.example)
    * sure contact email name field is now required (reply-to for emails)
    * new report viewer department should be set
    * honors admin section is no longer needed, and should be removed
  * Run the following migration scripts:
    * 012-add-candler-programs.php - update program hierarchy for Candler
    * 013-update_dc - Update the Dublin Core for all ETDs using the latest MODS -> DC conversion
  * Publication script has changed; weekly cron job that runs
    publish.php should be revised to send the output to a log file.
  * solr schema and indexing has changed, both should be updated:
    * restart solr (etd solr schema should be a symlink to copy in etd svn)
    * re-index all fedora objects with Fedora GSearch
  * update fedora xacml policies from latest svn


Version 1.5 - November 2009

* Author may restrict abstract and table of contents when requesting an embargo.
 * new ETD fedora service for accessing formatted parts of record
 * rights edit page no longer uses XForms
* Administrator may reactivate inactive records.
* Improved unit tests (better pid handling for fedora fixtures)

Deployment notes:
 * latest version of ETD cmodel & new service objects must be loaded to Fedora
 * update fedora xacml policies from latest svn
 * run migration 011
 * update gsearch & solr to latest xslt index & solr schema, reindex
   * recommended: configure gsearch to include etd xslt to simplify
     future updates, use symlink for solr schema
 * config/fedora.xml now requires pidspace for running tests
 * if connecting to fedora as localhost, add alternate hostnames to
   config/fedora.xml (new html service will only respond to requests
   from configured fedora instance)

Version 1.4 - October 2009

* new CSV yearly report for Graduate School
* Refined commencement report for Graduate School
* new admin feature: view automated email templates for sample records

Deployment notes:
 * run migrations 006-010
 * update gsearch & solr to latest xslt index & solr schema, reindex

Version 1.3 - August 2009

* Migrated from Fedora 2.2 to Fedora 3.2
 * new ETD Fedora services for metadata, OAI provider
 * all ETD records belong to collection objects in Fedora
* COinS/unAPI support
* converted ESD/Oracle code from php_oci to oci8

Version 1.2 - April 2009

* Now supports Emory College Undergraduate Honors theses submission
 * new honors admin role
 * customized honors version of etd models with different requirements
 * admin feature : edit program hierarchy
* revised program hierarchy handling 
* allow former faculty to be set as committee chair/members

Deployment notes:
 * run migration: 005-add_program_ids.php 
 * update gsearch & solr to latest xslt index & solr schema, reindex

Version 1.0.5 - February 19, 2009

* more flexible distribution agreement detection
* log user's role to site log when they log in to the site (for troubleshooting purposes)
* directives for print pages (should not be indexed by bots)
* bugfix: full-text search filter not lost when paging through results
* validate date format in file xacml policy (to avoid generating broken xacml and making objects inaccessible)
* bugfix: handle ':' character in search terms
* improved display for statistics graphs
* cleaned up unit tests

Version 1.0 - October 30, 2008

* better detection for multi-page table of contents when processing pdf and creating record
* improved MS Word formatting removal (initial record creation and subsequent edits)
* masters thesis submission to ProQuest now optional
* keyword reverse order problem fixed (bugfix in latest version of formfaces xforms)
* allow student to delete file (deletes but does not purge in repository)
* updated rights metadata language
* additional emails to embargo expiration script: 7-day warning/summary to ETD-ADMIN, 
  day-of expiration to author's permanent  address and committee    
* cleaned up all command line scripts, moved common code into one place
* experimental interactive php console with etd paths and classes loaded
* fixed bug that allowed submitting a record without an original document
* if distribution agreement not detected in pdf, do not create an etd record

Deployment notes:
 * run update_rights_statement.php, clean_xacml.php after updating

Version 0.9.5 - September 9, 2008

* improved browse - sorting, now retrieving browse display data from
  solr only instead of solr+fedora (much better response time)
* more extensive/informative logging
* when retrieving multiple records from fedora, if one cannot be accessed don't hang the whole page
* various submission fixes:
  * file upload
  * duplicate committee ids
  * handle invalid MODS
  * better title matching from PDFs

Deployment notes:
  * update gsearch & solr to latest xslt index & solr schema

Version 0.9.4 - August 2008

* new graduate program coordinator role & view (preliminary)
* site-wide logging
* facets for all search and browse pages (includes administrative record listings)
* support for co-chairs; advisor has been relabeled throughout as committee chair (except in solr index fieldname)
* added 'inactive' status for abandoned/unpublished records (NOT equivalent to inactive in Fedora)
* unit tests for all controllers (at least for what can currently be tested)
* ETD Dublin Core generated from MODS and updated every time record is saved
* overhauled etd find functions and handling sets of etd results-- affects search/browse, paging, facets, etc.
* author search with suggestor for graduate admin interface

Deployment notes:
 * install ESD Fedora filter for graduate program coordinator permissions
 * run clean_xacml script to fix/update xacml on all etd records
 * update gsearch to latest solr schema & index xslt
 * set path for logfile in config.xml; needs to be readable and writable by apache

Revision 1008 - April 2008

* upgraded to ZendFramework 1.5
* using Ldap credentials to authenticate to Fedora (instead of workaround)
* new cron scripts: publish.php, embargo_expiration.php
